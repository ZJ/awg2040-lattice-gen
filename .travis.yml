language: c
compiler: gcc
sudo: false
addons:
  apt:
    packages:
      - libgtest-dev
      - lcov
install:
  - gem install coveralls-lcov
  - gtest/build_gtest.sh
before_script:
  - cd ${TRAVIS_BUILD_DIR}
  - cmake .
  - make coverage-zero
script:
  - make
  - make coverage-initial
  - make test
after_success:
  - echo -e "\e[32m( ' \u25bd \` )b  $TRAVIS_BRANCH of $TRAVIS_REPO_SLUG on $HOST\e[0m"; make coverage-results
  - coveralls-lcov --repo-token ${COVERALLS_TOKEN} coverage.info
after_failure:
  - echo -e "\e[31m(╯°□°)╯︵ ┻━┻  $HOST\e[0m"
